
- [组装一个完整的买单订单数据，买FixForCollection和买FixForItem](#组装一个完整的买单订单数据买fixforcollection和买fixforitem)
  - [1. FixForCollection（针对集合的买单）](#1-fixforcollection针对集合的买单)
  - [2. FixForItem（针对具体NFT的买单）](#2-fixforitem针对具体nft的买单)
  - [主要区别：](#主要区别)


# 组装一个完整的买单订单数据，买FixForCollection和买FixForItem


根据代码分析，我来展示如何组装两种类型的买单订单数据：

## 1. FixForCollection（针对集合的买单）

```go
// 在EasySwapSync/service/orderbookindexer/service.go中的handleMakeEvent函数
collectionBidOrder := multi.Order{
    CollectionAddress: "0x...",  // NFT集合合约地址
    MarketplaceId:     multi.MarketOrderBook,
    TokenId:           "0",       // FixForCollection时TokenId为0
    OrderID:           "0x...",   // 订单唯一标识
    OrderStatus:       multi.OrderStatusActive,
    EventTime:         time.Now().Unix(),
    ExpireTime:        1234567890, // 过期时间戳
    CurrencyAddress:   "0x...",   // 支付代币合约地址
    Price:             decimal.NewFromFloat(0.1), // 出价
    Maker:             "0x...",   // 买家地址
    Taker:             ZeroAddress,
    QuantityRemaining: 1,         // 剩余可购买数量
    Size:              1,         // 订单大小
    OrderType:         multi.CollectionBidOrder, // 订单类型
    Salt:              12345,     // 随机数
}
```

## 2. FixForItem（针对具体NFT的买单）

```go
// 在EasySwapSync/service/orderbookindexer/service.go中的handleMakeEvent函数
itemBidOrder := multi.Order{
    CollectionAddress: "0x...",  // NFT集合合约地址
    MarketplaceId:     multi.MarketOrderBook,
    TokenId:           "123",     // 具体的NFT Token ID
    OrderID:           "0x...",   // 订单唯一标识
    OrderStatus:       multi.OrderStatusActive,
    EventTime:         time.Now().Unix(),
    ExpireTime:        1234567890, // 过期时间戳
    CurrencyAddress:   "0x...",   // 支付代币合约地址
    Price:             decimal.NewFromFloat(0.2), // 出价
    Maker:             "0x...",   // 买家地址
    Taker:             ZeroAddress,
    QuantityRemaining: 1,         // 剩余可购买数量
    Size:              1,         // 订单大小
    OrderType:         multi.ItemBidOrder, // 订单类型
    Salt:              12345,     // 随机数
}
```

## 主要区别：

1. TokenId：
   - FixForCollection：固定为"0"
   - FixForItem：指定具体的Token ID

2. OrderType：
   - FixForCollection：使用`multi.CollectionBidOrder`
   - FixForItem：使用`multi.ItemBidOrder`

3. 价格策略：
   - FixForCollection：通常价格较低，因为不指定具体NFT
   - FixForItem：价格通常较高，针对特定NFT

4. 灵活性：
   - FixForCollection：可以购买集合中任何可用的NFT
   - FixForItem：只能购买指定的NFT

这两种订单类型在`processBids`函数中会被统一处理，系统会根据价格和可用性自动选择最优的订单进行匹配。


