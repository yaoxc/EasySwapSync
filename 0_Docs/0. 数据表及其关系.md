
# 项目主要数据表及其关系如下

## 1. 核心业务表
- Collection (集合表)
  - 记录NFT集合基本信息
  - 包含：名称、创建者、合约地址、地板价、总交易量等

- Item (NFT物品表)
  - 记录具体的NFT物品
  - 关联Collection：通过collection_address字段
  - 包含：token_id、owner、trait等信息

- Order (订单表)
  - 记录买卖订单
  - 关联Collection：通过collection_address
  - 关联Item：通过token_id
  - 包含：订单状态、价格、过期时间等

- Activity (活动表)
  - 记录所有活动历史
  - 通过tx_hash、collection_address、token_id组合关联
  - 包含：活动类型、价格、参与方等

## 2. 关联关系
```
Collection 1:N Item
Collection 1:N Order
Collection 1:N Activity
Item 1:N Order
Item 1:N Activity
```

## 3. 关联方式
- Collection与Item：通过collection_address
- Order与Collection/Item：通过collection_address和token_id
- Activity与其他表：通过(tx_hash, collection_address, token_id, activity_type)组合

## 4. 特点
- Activity表不直接存储order_id，而是通过其他字段组合关联
- 所有表都有create_time和update_time记录时间戳
- 使用decimal.Decimal类型处理价格相关字段
- 通过unique约束保证数据一致性

这种设计可以：
1. 完整追踪NFT生命周期
2. 支持复杂查询场景
3. 保证数据一致性
4. 便于数据分析和统计


